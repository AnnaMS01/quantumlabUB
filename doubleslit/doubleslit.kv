#:kivy 1.0.9
#: import main doubleslit


<DoubleSlitScreen>:
    p_rectangle: p_rect
    playpause_button: pp_button

    frame_slider: f_slider
    speed_slider: s_slider
    normalize_switch: n_switch
    screen_pos_slider: ms_slider
    screen_width_slider: msw_slider

    compute_button: c_button
    progress_bar: p_bar

    slider_sx: sx_slider
    slider_sy: sy_slider
    slider_d: d_slider

    orientation: "vertical"
    padding: 10
    spacing: 10

    Widget:
        size_hint: (1, 0.5)
        id: p_rect

    BoxLayout:
        size_hint: (1, 0.5)

        orientation: "vertical"

        BoxLayout:
            size_hint: (1, 0.1)
            orientation: "horizontal"
            spacing: 10
            padding: [10, 10, 10, 10]

            Button:
                size_hint_x: 0.1
                id: pp_button
                text: "Play"
                on_press: root.playpause()
            Slider:
                value_track: True
                size_hint_x: 0.8
                id: f_slider
                on_touch_down: if self.collide_point(*args[1].pos): root.change_frame()
                on_touch_move: if self.collide_point(*args[1].pos): root.change_frame()


        TabbedPanel:
            size_hint: (1, 0.2)
            do_default_tab: False

            TabbedPanelItem:
                text: "[b]Experiment[/b]"
                markup: True

                BoxLayout:
                    orientation: "vertical"

                    BoxLayout:
                        orientation: "horizontal"
                        Label:
                            text: "Slit thickness:"
                        Slider:
                            id: sx_slider
                            min: 0
                            max: 1

                    BoxLayout:
                        orientation: "horizontal"
                        Label:
                            text: "Slit width:"
                        Slider:
                            id: sy_slider
                            min: 0
                            max: 5
                    BoxLayout:
                        orientation: "horizontal"
                        Label:
                            text: "Distance between slits:"
                        Slider:
                            id: d_slider
                            min: 0
                            max: 7

            TabbedPanelItem:
                text: "[b]Measurement[/b]"
                markup: True

                BoxLayout:
                    orientation: "horizontal"
                    spacing: 10
                    padding: [10, 10, 10, 10]

                    BoxLayout:
                        orientation: "vertical"
                        Button:
                            text: "Measure"
                            on_press: root.measure()

                        Button:
                            text: "Measure 100"
                            on_press: root.measure(100)

                        Button:
                            text: "Remove measurements"
                            on_press: root.remove_measurements()

                    BoxLayout:
                        orientation: "vertical"
                        BoxLayout:
                            orientation: "horizontal"
                            Label:
                                text: "Measuring screen pos:"
                            Slider:
                                id: ms_slider
                                min: 0
                                max: 1
                                value: 0.25

                        BoxLayout:
                            orientation: "horizontal"
                            Label:
                                text: "Measuring screen width:"
                            Slider:
                                id: msw_slider
                                min: 1
                                max: 10
                                value: 5



            TabbedPanelItem:
                text: "[b]Options[/b]"
                markup: True

                BoxLayout:
                    orientation: "horizontal"
                    Label:
                        text: "Speed:"
                    Slider:
                        id: s_slider
                        min: 1
                        max: 5
                        value: 1
                        setp: 1

                    Label:
                        text: "Normalize each frame:"
                    Switch:
                        id: n_switch


        BoxLayout:
            size_hint: (1, 0.1)
            orientation: "horizontal"
            spacing: 10
            padding: [10, 10, 10, 10]

            Button:
                id: c_button
                text: "Compute"
                on_press: root.compute()

            #size_hint: (1, 0.5/3)
            ProgressBar:
                id: p_bar
                max: 100
