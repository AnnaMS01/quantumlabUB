
#:import math math
#:import Factory kivy.factory.Factory
#:kivy 1.10.0

<TrueScreen>:
    orientation: 'vertical'


<EntangledScreen>:
    name: 'ES'
    #Qua variables

    n_label: n_label #MOLT IMPORTANT AIXÒ, SI NO EL PROGRAMA NO SAP DE Q ÉS
    label_s1:label_s1
    label_s2:label_s2
    textin_alph : label_s1_1
    textin_bet : label_s2_1
    table_checkbox:table_checkbox
    graph_checkbox:graph
    s_label:s_label
    delete_button:delete_button
    select_button:select_button
    clear_btn:clear_btn
    plot_btn:plot_btn
    b1_label:b1_label
    b2_label:b2_label
    img_widg:anwidg

    #HVT variables

    n_label_hvt : n_label_hvt
    label_s1_hvt : label_s1_hvt
    label_s2_hvt : label_s2_hvt
    textin_alph_hvt : label_s1_1_hvt
    textin_bet_hvt : label_s2_1_hvt
    table_checkbox_hvt : table_checkbox_hvt
    s_label_hvt : s_label_hvt
    plot_btn_hvt : plot_btn_hvt
    alpha_hvt : alpha_hvt
    reps : reps
    rho1 : rho1
    rho2 : rho2
    sum_btn : sum_btn
    rest_btn : rest_btn
    plot_btn_hvt : plot_btn_hvt

    BoxLayout:

        orientation: "vertical"
        padding: 10
        spacing: 5

        GridLayout:
            cols : 3
            rows : 1
            width: self.minimum_width
            BoxLayout:
                spacing: 10
                orientation: "vertical"
                Label:
                    text: "Pol 1"
                    size_hint: (0.05,0.1)
                    pos_hint:{'x': 0.32, 'y':1}
                    color: 1, 1, 1, 1
                Image:
                    id: I1
                    pos_hint:{'x': 0., 'y':0.}
                    source: 'img/pol2.png'

                # Giving the size of image
                    size_hint: (0.7,0.7)

                    # allow sterching of image
                    allow_stretch: False
                    canvas.before:
                        PushMatrix:
                        Rotate:
                            angle: root.angle_1
                            origin:self.center
                    canvas.after:
                        PopMatrix

                Label:
                    text: "Pol 2"
                    size_hint: (0.05,0.1)
                    pos_hint:{'x': 0.32, 'y':1}
                    color: 1, 1, 1, 1

                Image:
                    id: I2
                    pos_hint:{'x': 0., 'y':0.}
                    source: 'img/pol2.png'

                # Giving the size of image
                    size_hint: (0.7,0.7)

                    # allow sterching of image
                    allow_stretch: False
                    canvas.before:
                        PushMatrix:
                        Rotate:
                            angle: root.angle_2
                            origin:self.center
                    canvas.after:
                        PopMatrix

            BoxLayout:
                id: anwidg
                canvas:
                    Color:
                        rgb: (1, 1, 1)
                    Rectangle:
                        size : self.size
                        pos: self.pos
                        source : "img/sketch_exp_2.png"

        TabbedPanel:
            size_hint: (1, 1)
            do_default_tab: False
            border : [0, 0, 0, 0]
            background_image: 'img/metal.jpg'

            TabbedPanelItem: #creem la primera pestanya
                text: "[b]Quantum\n experiment[/b]"
                markup: True
                on_release: root.tab_selector = 0
                on_release: root.tab_change = True
                on_release: root.angle_1 = 0
                on_release: root.angle_2 = 0
                on_release: root.angle_update()

                BoxLayout:
                    orientation: "horizontal" #el partim en 2 cols grans

                    BoxLayout:
                        orientation:"vertical"
                        Label:
                            text: "[b]Experiment settings:[/b]"
                            markup: True
                        BoxLayout:
                            orientation: "horizontal"

                            Label:
                                text: "Number of photons:"
                                markup: True
                                pos_hint:{'x': .7, 'y':.3}

                            Button:
                                text:"-"
                                size_hint: (0.2,0.25)
                                pos_hint:{'x': 1.3, 'y':.7}
                                on_press: root.start_photon_adding(-10000)
                                on_press: root.add_photons(-10000)
                                on_release: root.stop_photon_adding()

                            TextInput:
                                id: n_label
                                size_hint: (.5,0.25)
                                pos_hint:{'x': 0.7, 'y':.7}
                                foreground_color : (1, 0, 0, 1)
                                background_color : (0, 0, 0, 1)
                                text: "10000"
                                font_name: 'digital-7.ttf'
                                font_size: 20
                                multiline : False


                            Button:
                                text: "+"
                                size_hint: (0.2,0.25)
                                pos_hint:{'x': .5, 'y':.7}
                                on_press: root.start_photon_adding(10000)
                                on_press: root.add_photons(10000)
                                on_release: root.stop_photon_adding()

                        FloatLayout:
                            Label:
                                id: s_label
                                size_hint: None, None
                                size:240,100
                                text:'[font=digital-7][color=000000][size=34] S=                [/color][/font][/size]'
                                markup:True
                                pos_hint:{'x':0.1,'y':0.2}
                                canvas:
                                canvas.before:
                                    Color:
                                        rgba: 0, 153, 0, 0.5

                                    RoundedRectangle:
                                        pos: self.pos[0] , self.pos[1]+20
                                        size: (self.width, self.height*0.8)
                                        id: S_rect

                    BoxLayout:
                        orientation:"vertical"
                        Label:
                            text:"[b]Polarizer angles:[/b]"
                            markup: True
                        FloatLayout:
                            Label:
                                text: "Angle of polarizer 1: \u03B1 (deg)"
                                pos_hint: {'x': 0, 'y':0.4}
                        BoxLayout:
                            orientation: 'horizontal'
                            FloatLayout:
                                AngleKnob:
                                    id: knob_1
                                    pos_hint:{'x': 0.7, 'y':0}
                                    min: 0
                                    max: 360
                                    step: 1
                                    slope: 1
                                    value: 0
                                    on_release: root.runexp()
                                    on_release: root.run_animation()
                                    on_press: root.change_pol_angles()
                                    on_release: root.stop_angles()
                                    knobimg_source: "img/knob_metal.png"
                                    show_marker: True  # Show surrounding marker
                                    marker_img: "img/bline2.png" # Marker texture image

                                    Label:
                                        id: label_s1
                                        text: "{}".format(int(self.parent.value))
                                        center: self.parent.center
                                        font_name: 'digital-7.ttf'
                                        center: self.parent.center
                                        font_size: 25
                                        color: (0, 205/255, 0, 1)
                            FloatLayout:
                                TextInput:
                                    id: label_s1_1
                                    size_hint: (0.2, 0.5)
                                    size : (50, 30)
                                    pos_hint: {'x': 0.2, 'y':0.5}
                                    foreground_color : (1, 0, 0, 1)
                                    background_color : (0, 0, 0, 1)
                                    text: "{}".format(int(knob_1.value))
                                    font_name: 'digital-7.ttf'
                                    font_size: 23
                                    multiline:False
                                    on_text_validate: label_s1.text = self.text
                                    on_text_validate: knob_1.value = int(self.text)
                                    on_text_validate: root.angle_1 = -int(self.text)
                                    on_text_validate: root.runexp()
                                    on_text_validate: root.run_animation()
                        FloatLayout:
                            Label:
                                text: "Angle of polarizer 2: \u03B2 (deg)"
                                pos_hint: {'x': 0, 'y':0.4}

                        BoxLayout:
                            orientation: 'horizontal'
                            FloatLayout:
                                AngleKnob:
                                    id: knob_2
                                    pos_hint:{'x': 0.7, 'y':0}
                                    min: 0
                                    max: 360
                                    step: 1
                                    slope: 1
                                    value: 0
                                    knobimg_source: "img/knob_metal.png"
                                    show_marker: True  # Show surrounding marker
                                    on_release: root.runexp()
                                    on_release: root.run_animation()

                                    on_press: root.change_pol_angles()
                                    on_release: root.stop_angles()
                                    marker_img: "img/bline2.png" # Marker texture image

                                    Label:
                                        id: label_s2
                                        text: "{}".format(int(self.parent.value))
                                        font_name: 'digital-7.ttf'
                                        center: self.parent.center
                                        font_size: 25
                                        color: (0, 205/255, 0, 1)
                            FloatLayout:
                                TextInput:
                                    id: label_s2_1
                                    size_hint: (0.2, 0.5)
                                    pos_hint: {'x': 0.2, 'y':0.5}
                                    foreground_color : (1, 0, 0, 1)
                                    background_color : (0, 0, 0, 1)
                                    text: "{}".format(int(knob_2.value))
                                    font_name: 'digital-7.ttf'
                                    font_size: 23
                                    multiline:False
                                    on_text_validate: label_s2.text = self.text
                                    on_text_validate: knob_2.value = int(self.text)
                                    on_text_validate: root.angle_2 = -int(self.text)
                                    on_text_validate: root.runexp()
                                    on_text_validate: root.run_animation()



                    BoxLayout:
                        orientation:"vertical"
                        BoxLayout:
                            orientation: "vertical"
                            BoxLayout:
                                orientation: 'horizontal'
                                Switch:
                                    id: graph
                                    size_hint:(0.2,0.2)
                                    pos_hint:{'x': 0, 'y':0.4}
                                Label:
                                    text: "Generate 3D S-plot"
                                    #pos_hint:{'x': -0.1, 'y':0}

                                Label:
                                    id: info_label
                                    text:'Select input angles'
                                    font_name: 'digital-7.ttf'
                                    color: (1, 0, 0, 1)
                                    font_size: 20
                                    markup:True
                                    canvas:
                                    canvas.before:
                                        Color:
                                            rgba: 0, 0, 0, 1

                                        Rectangle:
                                            pos: self.pos[0] , self.pos[1]+10
                                            size: (self.width, self.height*0.6)


                            BoxLayout:
                                orientation: "horizontal"
                                BoxLayout:
                                    orientation: "vertical"
                                    Button:
                                        id: select_button
                                        text: "Select angle"
                                        disabled: True
                                        on_release:root.select_angle()
                                    Button:
                                        id: delete_button
                                        disabled: True
                                        text: "Delete angle"
                                        on_release:root.delete_angle()
                                BoxLayout:
                                    orientation: "vertical"
                                    BoxLayout:
                                        orientation: "horizontal"
                                        Label:
                                            text:"\u03B2"+"1:"
                                        TextInput:
                                            id: b1_label
                                            size_hint: (1,1.25)
                                            foreground_color : (1, 0, 0, 1)
                                            background_color : (0, 0, 0, 1)
                                            text: '0'
                                            font_name: 'digital-7.ttf'
                                            font_size: 20
                                            multiline:False
                                            on_text:root.kwinput=True
                                            on_text_validate:root.select_angle()
                                            disabled: not graph.active

                                    BoxLayout:
                                        orientation: "horizontal"
                                        Label:
                                            text:"\u03B2"+"2:"
                                        TextInput:
                                            id: b2_label
                                            size_hint: (1,1.25)
                                            foreground_color : (1, 0, 0, 1)
                                            background_color : (0, 0, 0, 1)
                                            text: '0'
                                            font_name: 'digital-7.ttf'
                                            font_size: 20
                                            multiline:False
                                            on_text:root.kwinput=True
                                            on_text_validate:root.select_angle()
                                            disabled: not graph.active

                            BoxLayout:
                                orientation: "horizontal"
                                Button:
                                    id:plot_btn
                                    text: "Plot"
                                    size_hint: (0.9,0.7)
                                    disabled: True
                                    on_release: root.manager.get_screen('GS').graph_thread()
                                    on_release: info_label.text = 'Plotting, stand by...'

                                Button:
                                    id:clear_btn
                                    text: "Clear"
                                    size_hint: (0.9,0.7)
                                    disabled: True
                                    on_release:root.clear_angles()

                        BoxLayout:
                            orientation: "horizontal"
                            FloatLayout:
                                Switch:
                                    id: table_checkbox
                                    size_hint:(0.1,0.1)
                                    pos_hint:{'x': 0, 'y':0.4}

                                Label:
                                    text: "Generate table"
                                    pos_hint:{'x': -0.1, 'y':0}


                        Button:
                            size_hint: (1,0.5)
                            text: 'Experiment sketch and info'
                            on_release: root.manager.current = 'IS'

            TabbedPanelItem: #creem la 2a pestanya
                text: "[b]HVT[/b]"
                markup: True
                on_release : root.tab_selector = 1
                on_release: root.angle_1 = 0
                on_release: root.angle_2 = 0
                on_release: root.tab_change = True
                on_release: root.angle_update()
                BoxLayout:
                    orientation: "horizontal" #el partim en 2 cols grans

                    BoxLayout:
                        orientation:"vertical"
                        Label:
                            text: "[b]Experiment settings:[/b]"
                            markup: True
                        BoxLayout:
                            orientation: "horizontal"

                            Label:
                                text: "Number of photons:"
                                markup: True
                                pos_hint:{'x': .7, 'y':.3}

                            Button:
                                text:"-"
                                size_hint: (0.2,0.35)
                                pos_hint:{'x': 1.3, 'y':.7}
                                on_press: root.start_photon_adding(-10000)
                                on_press: root.add_photons(-10000)
                                on_release: root.stop_photon_adding()

                            TextInput:
                                id: n_label_hvt
                                size_hint: (.5,0.35)
                                pos_hint:{'x': 0.7, 'y':.7}
                                foreground_color : (1, 0, 0, 1)
                                background_color : (0, 0, 0, 1)
                                text: "10000"
                                font_name: 'digital-7.ttf'
                                font_size: 20
                                multiline : False


                            Button:
                                text: "+"
                                size_hint: (0.2,0.35)
                                pos_hint:{'x': .5, 'y':.7}
                                on_press: root.start_photon_adding(10000)
                                on_press: root.add_photons(10000)
                                on_release: root.stop_photon_adding()
                        BoxLayout:
                            orientation: "horizontal"
                            FloatLayout:
                                pos_hint:{'x': 0, 'y':.0}
                                Label:
                                    pos_hint:{'x': 0.1, 'y':.5}
                                    text: "Number of repetitions\n of the experiment:"

                            FloatLayout:
                                TextInput:
                                    id:reps
                                    background_color : (0, 0, 0, 1)
                                    foreground_color : (1, 0, 0, 1)
                                    size_hint: (0.4,.4)
                                    pos_hint : {'x': 0.3, 'y':.7}
                                    multiline : False
                                    text: '1'
                                    font_name: 'digital-7.ttf'
                                    font_size: 25

                        FloatLayout:
                            Label:
                                id: s_label_hvt
                                size_hint: None, None
                                size:240,100
                                text:'[font=digital-7][color=000000][size=34] S=                [/color][/font][/size]'
                                markup:True
                                pos_hint:{'x':0.2,'y':0.2}
                                canvas:
                                canvas.before:
                                    Color:
                                        rgba: 0, 153, 0, 0.5

                                    RoundedRectangle:
                                        pos: self.pos[0] , self.pos[1]+10
                                        size: (self.width, self.height*0.8)
                                        id: S_rect_hvt

                    BoxLayout:
                        orientation:"vertical"
                        Label:
                            text:"[b]Polarizer angles:[/b]"
                            markup: True
                        FloatLayout:
                            Label:
                                text: "Angle of polarizer 1: \u03B1 (deg)"
                                pos_hint: {'x': 0, 'y':0.4}
                        BoxLayout:
                            orientation: 'horizontal'
                            FloatLayout:
                                AngleKnob:
                                    id: knob_1_hvt
                                    pos_hint:{'x': 0.7, 'y':0}
                                    min: 0
                                    max: 360
                                    step: 1
                                    slope: 1
                                    value: 0
                                    on_press: root.change_pol_angles()
                                    on_release: root.stop_angles()
                                    knobimg_source: "img/knob_metal.png"
                                    show_marker: True  # Show surrounding marker
                                    marker_img: "img/bline2.png" # Marker texture image

                                    Label:
                                        id: label_s1_hvt
                                        text: "{}".format(int(self.parent.value))
                                        center: self.parent.center
                                        font_size: 25
                                        font_name: 'digital-7.ttf'
                                        color: (0, 205/255, 0, 1)
                            FloatLayout:
                                TextInput:
                                    id: label_s1_1_hvt
                                    size_hint: (0.2, 0.5)
                                    pos_hint: {'x': 0.2, 'y':0.5}
                                    foreground_color : (1, 0, 0, 1)
                                    background_color : (0, 0, 0, 1)
                                    text: "{}".format(int(knob_1_hvt.value))
                                    font_name: 'digital-7.ttf'
                                    font_size: 23
                                    multiline:False
                                    on_text_validate: label_s1_hvt.text = self.text
                                    on_text_validate: knob_1_hvt.value = int(self.text)
                                    on_text_validate: root.angle_1 = -int(self.text)

                        FloatLayout:
                            Label:
                                text: "Angle of polarizer 2: \u03B2 (deg)"
                                pos_hint: {'x': 0, 'y':0.4}

                        BoxLayout:
                            orientation: 'horizontal'
                            FloatLayout:
                                AngleKnob:
                                    id: knob_2_hvt
                                    pos_hint:{'x': 0.7, 'y':0}
                                    min: 0
                                    max: 360
                                    step: 1
                                    slope: 1
                                    value: 0
                                    knobimg_source: "img/knob_metal.png"
                                    show_marker: True  # Show surrounding marker

                                    on_press: root.change_pol_angles()
                                    on_release: root.stop_angles()
                                    marker_img: "img/bline2.png" # Marker texture image

                                    Label:
                                        id: label_s2_hvt
                                        text: "{}".format(int(self.parent.value))
                                        center: self.parent.center
                                        font_size: 25
                                        font_name: 'digital-7.ttf'
                                        color: (0, 205/255, 0, 1)
                            FloatLayout:
                                TextInput:
                                    id: label_s2_1_hvt
                                    size_hint: (0.2, 0.5)
                                    pos_hint: {'x': 0.2, 'y':0.5}
                                    foreground_color : (1, 0, 0, 1)
                                    background_color : (0, 0, 0, 1)
                                    text: "{}".format(int(knob_2_hvt.value))
                                    font_name: 'digital-7.ttf'
                                    font_size: 23
                                    multiline:False
                                    on_text_validate: label_s2_hvt.text = self.text
                                    on_text_validate: knob_2_hvt.value = int(self.text)
                                    on_text_validate: root.angle_2 = -int(self.text)

                    BoxLayout:
                        orientation:"vertical"
                        BoxLayout:
                            orientation: "vertical"

                            Label:
                                text: "Generate S vs \u03B2 plot"
                                pos_hint:{'x': -0.1, 'y':0}
                            Label:
                                text:"select fixed \u03B1" + " (deg):"
                            BoxLayout:
                                orientation: "horizontal"

                                Button:
                                    id: rest_btn
                                    text: "-"
                                    on_press: root.angle_down_hvt()
                                    on_press: root.start_angle_down()
                                    on_release: root.stop_angle_down()

                                TextInput:
                                    id: alpha_hvt
                                    size_hint: (1,1.1)
                                    foreground_color : (1, 0, 0, 1)
                                    background_color : (0, 0, 0, 1)
                                    text: '0'
                                    font_name: 'digital-7.ttf'
                                    font_size: 20
                                    multiline : False
                                    on_text_validate:root.manager.get_screen('GS').graph_thread()


                                Button:
                                    id: sum_btn
                                    text: "+"
                                    disabled: False
                                    on_press: root.angle_up_hvt()
                                    on_press: root.start_angle_up()
                                    on_release: root.stop_angle_up()


                            BoxLayout:
                                orientation: "horizontal"
                                Button:
                                    id:plot_btn_hvt
                                    text: "Plot"
                                    size_hint: (0.9,0.7)
                                    on_release: root.manager.get_screen('GS').graph_thread()


                        BoxLayout:
                            orientation: "horizontal"
                            FloatLayout:
                                Switch:
                                    id: table_checkbox_hvt
                                    size_hint:(0.1,0.1)
                                    pos_hint:{'x': 0, 'y':0.4}

                                Label:
                                    text: "Generate table"
                                    pos_hint:{'x': -0.1, 'y':0}
                        BoxLayout:
                            orientation: "vertical"

                            BoxLayout:
                                orientation: "horizontal"
                                Switch:
                                    id: rho1
                                    active : True
                                Label:
                                    text: "\u03C1"+"1"
                            BoxLayout:
                                orientation: "horizontal"
                                Switch:
                                    id: rho2
                                Label:
                                    text: "\u03C1"+"2"

                        Button:
                            size_hint: (1,0.3)
                            text: "Calculate S"
                            id: run_b
                            on_release: root.exp_thread()
                            on_release: root.run_animation()

            TabbedPanelItem:
                text: "[b]Use real\n data[/b]"
                markup: True
                BoxLayout:
                    orientation: 'vertical'

                    FileChooserIconView:
                        id: filechooser
                        path: "."
                        on_submit: root.select_file(filechooser.selection)
                        on_selection:
                            if len(filechooser.selection) != 0: \
                            root.file_name = filechooser.selection[0]

                    Button:
                        size_hint: (1,0.1)
                        text: 'Load file (.csv)'
                        on_release:root.select_file(filechooser.selection)

<GraphScreen>:
    mainlay:mainlay
    bottom_lay:bottom_lay
    name:'GS'
    BoxLayout:
        orientation: 'vertical'
        id: mainlay
        BoxLayout:
            orientation: 'horizontal'
            id:bottom_lay
            size_hint_y : 0.07



<TablePopup>:
    table_lay : table_lay
    title: 'Table 1'
    BoxLayout:
        orientation: 'vertical'
        canvas.before:
            Color:
                rgba : (1,1,1,1)
            Rectangle:
                size : self.size
                pos : self.pos

        GridLayout:
            id : table_lay
            rows : 17
            cols : 5

        Button:
            size_hint: (1,0.05)
            pos_hint: {'x':0, 'y':0}
            text: 'Close'
            on_release: root.manager.current = 'ES'

<DataScreen>:
    name: 'DS'
    table_lay_data: table_lay_data
    s_label_data : s_label_data
    BoxLayout:
        orientation: 'vertical'
        canvas.before:
            Color:
                rgba : (1,1,1,1)
            Rectangle:
                size : self.size
                pos : self.pos

        GridLayout:
            id : table_lay_data
            rows : 17
            cols : 5

        BoxLayout:
            orientation: 'vertical'
            size_hint: (1,0.2)
            BoxLayout:
                orientation: 'horizontal'
                BoxLayout:
                    orientation: 'vertical'
                    Button:
                        text: 'Calculate S from data'
                        on_release : root.run_exp_data()

                    Button:
                        text: 'Calculate S predicted by HVT'
                        on_release:  root.run_cla_pred()
                Label:
                    id: s_label_data
                    text:'[font=digital-7][color=000000][size=34] S=                [/color][/font][/size]'
                    markup:True
                    #pos_hint:{'x':0.1,'y':0.2}
                    canvas.before:
                        Color:
                            rgba: 0, 153, 0, 1

                        RoundedRectangle:
                            pos: self.pos[0] , self.pos[1]
                            size: (self.width, self.height)
                            id: S_rect

            Button:
                text: 'Close'
                on_release: root.manager.current = 'ES'
                on_release: s_label_data.text = '[font=digital-7][color=000000][size=34] S=                [/color][/font][/size]'


<InfoScreen>:
    im_view: im_view
    comp_pos_im: comp_pos_im
    top_ch: top_ch
    trb_ch: trb_ch
    right_ch: right_ch
    tlf_ch: tlf_ch
    front_ch: front_ch
    trf_ch: trf_ch
    comp_im: comp_im
    specs_lab: specs_lab
    name: 'IS'
    BoxLayout:
        orientation: 'vertical'
        id: info_mainlay

        BoxLayout:
            orientation: 'horizontal'
            id: info_toplay

            BoxLayout:
                orientation: 'vertical'
                id: checkbox_lay
                FloatLayout:
                    Label:
                        text:"CHOOSE VIEW"
                        font_size: 28
                        bold: True
                        pos_hint: {'x':0.1, 'y':0.4}
                        size_hint: (0.4,0.4)
                    CheckBox:
                        id: top_ch
                        group: 'views'
                        pos_hint: {'x':0, 'y':0.2}
                        size_hint:(0.1,0.1)
                        on_active: root.on_view_select(self, self.active, 1)
                    Label:
                        text: 'Top'
                        size_hint: (0.2,0.2)
                        pos_hint: {'x':0.05, 'y':0.15}

                    CheckBox:
                        id: trb_ch
                        group: 'views'
                        pos_hint: {'x':0.25, 'y':0.2}
                        size_hint:(0.1,0.1)
                        on_active: root.on_view_select(self, self.active, 2)

                    Label:
                        text: 'Top-Right-Back'
                        size_hint: (0.2,0.2)
                        pos_hint: {'x':0.35, 'y':0.15}

                FloatLayout:
                    CheckBox:
                        id: right_ch
                        group: 'views'
                        size_hint:(0.1,0.1)
                        pos_hint: {'x':0, 'y':0.2}
                        on_active: root.on_view_select(self, self.active, 3)
                    Label:
                        text: 'Right'
                        size_hint: (0.2,0.2)
                        pos_hint: {'x':0.05, 'y':0.15}

                    CheckBox:
                        id: tlf_ch
                        group: 'views'
                        pos_hint: {'x':0.25, 'y':0.2}
                        size_hint:(0.1,0.1)
                        active: True
                        on_active: root.on_view_select(self, self.active, 4)
                    Label:
                        text: 'Top-Left-Front'
                        size_hint: (0.2,0.2)
                        pos_hint: {'x':0.35, 'y':0.15}

                FloatLayout:
                    CheckBox:
                        id: front_ch
                        group: 'views'
                        size_hint:(0.1,0.1)
                        pos_hint: {'x':0, 'y':0.2}
                        on_active: root.on_view_select(self, self.active, 5)
                    Label:
                        text: 'Front'
                        size_hint: (0.2,0.2)
                        pos_hint: {'x':0.05, 'y':0.15}

                    CheckBox:
                        id: trf_ch
                        group: 'views'
                        pos_hint: {'x':0.25, 'y':0.2}
                        size_hint:(0.1,0.1)
                        on_active: root.on_view_select(self, self.active, 6)
                    Label:
                        text: 'Top-Right-Front'
                        size_hint: (0.2,0.2)
                        pos_hint: {'x':0.35, 'y':0.15}


            Image:
                id: im_view
                source: 'img/top-left-front.png'
                # Giving the size of image
                size_hint: (1,1)

                # allow sterching of image
                allow_stretch: True

            Image:
                id: comp_pos_im
                source: 'img/top.png'
                # Giving the size of image
                size_hint: (1,1)
                comp_pos_x: 0
                comp_pos_y: 0
                comp_y_size: 0
                # allow sterching of image
                allow_stretch: True
                canvas.before:
                    Rectangle:
                        source: 'img/red_frame.png'
                        pos: self.pos[0]+self.size[0]*0.34+self.comp_pos_x, self.pos[1]+self.size[1]*0+self.comp_pos_y
                        size: self.size[0]*0.3,self.size[1]*0.3-self.comp_y_size


        BoxLayout:
            orientation: 'horizontal'
            id: info_bottomlay
            canvas.before:
                Rectangle:
                    source: 'img/metal.jpg'
                    size: self.size
                    pos: self.pos

            BoxLayout:
                orientation: 'vertical'
                id: comp_lay
                FloatLayout:
                    Label:
                        text:"INSPECT COMPONENT"
                        font_size: 28
                        bold: True
                        pos_hint: {'x':0.2, 'y':0.5}
                        size_hint: (0.4,0.4)
                    CheckBox:
                        pos_hint: {'x':0, 'y':0.2}
                        size_hint:(0.1,0.1)
                        group: 'comps'
                        on_active: root.animate_frame(comp_pos_im, 3)
                        on_active: root.on_comp_select(self, self.active, 4)
                    Label:
                        text: 'Polarizer'
                        size_hint: (0.2,0.2)
                        pos_hint: {'x':0.05, 'y':0.15}

                    CheckBox:
                        pos_hint: {'x':0.25, 'y':0.2}
                        size_hint:(0.1,0.1)
                        group: 'comps'
                        active: True
                        on_active: root.animate_frame(comp_pos_im, 1)
                        on_active: root.on_comp_select(self, self.active, 1)
                    Label:
                        text: 'Laser'
                        size_hint: (0.2,0.2)
                        pos_hint: {'x':0.30, 'y':0.15}

                    CheckBox:
                        pos_hint: {'x':0.5, 'y':0.2}
                        size_hint:(0.1,0.1)
                        group: 'comps'
                        on_active: root.animate_frame(comp_pos_im, 4)
                        on_active: root.on_comp_select(self, self.active, 5)
                    Label:
                        text: 'Detector'
                        size_hint: (0.2,0.2)
                        pos_hint: {'x':0.55, 'y':0.15}

                FloatLayout:
                    CheckBox:
                        size_hint:(0.1,0.1)
                        pos_hint: {'x':0, 'y':0.7}
                        group: 'comps'
                        on_active: root.animate_frame(comp_pos_im, 1)
                        on_active: root.on_comp_select(self, self.active, 3)
                    Label:
                        text: 'Quartz Sheet'
                        size_hint: (0.2,0.2)
                        pos_hint: {'x':0.07, 'y':0.65}

                    CheckBox:
                        pos_hint: {'x':0.25, 'y':0.7}
                        size_hint:(0.1,0.1)
                        group: 'comps'
                        on_active: root.animate_frame(comp_pos_im, 2)
                        on_active: root.on_comp_select(self, self.active, 2)
                    Label:
                        text: 'Downconversion Crystals'
                        size_hint: (0.2,0.2)
                        pos_hint: {'x':0.40, 'y':0.65}

                    Button:
                        text: 'Go back to main screen'
                        size_hint: (0.8,0.3)
                        pos_hint: {'x': 0.1, 'y': 0.1}
                        on_release: root.manager.current = 'ES'
            FloatLayout:
                Image:
                    id: comp_im
                    source: 'img/laser.png'
                    # Giving the size of image
                    size_hint: (0.9,0.9)
                    pos_hint: {'x':0, 'y':0.05}

                    # allow sterching of image
                    allow_stretch: True
                    canvas.before:
                        Color:
                            rgba: (112/255,112/255,104/255,0.8)
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos



            Label:
                id: specs_lab
                halign: 'left'
                size: self.size
                text: ''
                font_size: 18
                canvas.before:
                    Color:
                        rgba: (0,0,0,0.8)
                    RoundedRectangle:
                        size: (self.size[0]*0.97, self.size[1]*0.9)
                        pos: (self.pos[0], self.pos[1]+20)

