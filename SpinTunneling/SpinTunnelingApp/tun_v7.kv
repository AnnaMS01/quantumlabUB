#:kivy 1.10.0
#:import Factory kivy.factory.Factory

<MyScreenManager>:
    StartingScreen:
    TunnelingScreen:
    GameScreen:

<StartingScreen>:
    name: 'starting'

    BoxLayout:
        orientation: 'vertical'
        padding: [root.width/10]


        Label:
            text: " "

        BoxLayout:
            canvas.before:
                #Color:
                #    rgba: (1,1,1,1)


        #buttons
            orientation: 'vertical'
            padding: [self.width/3, self.width/10]
            spacing: self.height/10
            size_hint_y: 2



            Button:
                id: dc_to_ss
                size_hint_y:0.2
                pos_hint_y:0.333
                background_color: (2.44,1.75,0.27,1)
                markup: True
                text: "TIME EVOLUTION"
                color:(0,0.08,0.31,1)
                font_size: self.width/12
                bold: True
                on_press: root.transition_Game()
                canvas.before:
                    Color:
                        rgba: 1, .5, .5, 0
                    Line:
                        width: 2
                        rectangle: self.x, self.y, self.width, self.height


            Button:
                id: dc_to_ys
                size_hint_y:0.2
                background_color: (2.55,2.55,2.55,1)
                markup: True
                text: "GRAPH"
                color:(0,0.08,0.31,1)
                font_size: self.width/12
                bold: True
                on_press: root.transition_ST()
                canvas.before:
                    Color:
                        rgba: 1, .5, .5, 0
                    Line:
                        width: 2
                        rectangle: self.x, self.y, self.width, self.height



<TunnelingScreen>
    name: 'Tunneling'
    box1:box_st


    # Grafic
    BoxLayout:
        id:box_st
        orientation:'vertical'
        size_hint:0.6,0.6
        pos_hint: {'x':0.05,'y':0.2}

    # Botons Spin
	BoxLayout:
	    orientation: 'vertical'
		size_hint:0.2,0.1
		pos_hint: {'x':0.7,'y':0.7}
		canvas.before:
            Color:
                rgba: 0, 0.08, 0.31, 1

		BoxLayout:
		    orientation: 'horizontal'
		    size_hint_y: .1

		    Button:
		        id: s1
		        size_hint_x:0.5
                pos_hint_x:0
                background_color: (2.44,1.75,0.27,1) if root.s==1 else (255,255,255,1)
                markup: True
                text: "S=1"
                color:(0,0.08,0.31,1)
                bold: True
                on_press: root.s=1

            Button:
		        id: s2
		        size_hint_x:0.5
                pos_hint_x:0
                background_color: (2.44,1.75,0.27,1) if root.s==1.5 else (255,255,255,1)
                markup: True
                text: "S=3/2"
                color:(0,0.08,0.31,1)
                bold: True
                on_press: root.s=1.5

        BoxLayout:
		    orientation: 'horizontal'
		    size_hint_y: .1

		    Button:
		        id: s3
		        size_hint_x:0.5
                pos_hint_x:0
                background_color: (2.44,1.75,0.27,1) if root.s==2 else (255,255,255,1)
                markup: True
                text: "S=2"
                color:(0,0.08,0.31,1)
                bold: True
                on_press: root.s=2

            Button:
		        id: s4
		        size_hint_x:0.5
                pos_hint_x:0
                background_color: (2.44,1.75,0.27,1) if root.s==2.5 else (255,255,255,1)
                markup: True
                text: "S=5/2"
                color:(0,0.08,0.31,1)
                bold: True
                on_press: root.s=2.5

    BoxLayout:
	    #orientation: 'horizontal'
		size_hint:0.2,0.05
		pos_hint: {'x':0.7,'y':0.6}

    	Button:
		    id: H1
		    size_hint_x:0.5
            pos_hint_x:0
            background_color: (2.44,1.75,0.27,1) if root.H_type==1 else (255,255,255,1)
            markup: True
            text: "H1"
            color:(0,0.08,0.31,1)
            bold: True
            on_press: root.H_type=1

        Button:
		    id: H2
		    size_hint_x:0.5
            pos_hint_y:0
            background_color: (2.44,1.75,0.27,1) if root.H_type==2 else (255,255,255,1)
            markup: True
            text: "H2"
            color:(0,0.08,0.31,1)
            bold: True
            on_press: root.H_type=2

    BoxLayout:
	    orientation: 'vertical'
		size_hint:0.2,0.1
		pos_hint: {'x':0.7,'y':0.475}

        Image:
            source: 'H1.png'
            size_hint:1.2,1.2
        Image:
            source: 'H2.png'
            size_hint:0.9,0.9

    BoxLayout:
	    orientation: 'vertical'
		size_hint:0.2,0.1
		pos_hint: {'x':0.7,'y':0.35}

        BoxLayout:
            orientation:'horizontal'
            Label:
                text: 'a='+str(a_slider.value)
                bold: True

            Slider:
                id:a_slider
                value:0.01
                min: 0.00
                max: 0.020
                step: 0.001
                on_value: root.a=a_slider.value


        BoxLayout:
            orientation:'horizontal'
            Label:
                text: 'b='+str(alpha_slider.value)
                bold: True
            Slider:
                id:alpha_slider
                value:0.1
                min: 0.00
                max: 1
                step: 0.01
                on_value: root.alpha=alpha_slider.value

    BoxLayout:
	    orientation: 'vertical'
		size_hint:0.2,0.1
		pos_hint: {'x':0.7,'y':0.2}


        
        Button:
            id: alpha_button
            size_hint_x:1
            pos_hint_x:0
            background_color: (2.44,1.75,0.27,1)
            markup: True
            text: "SEND"
            color:(0,0.08,0.31,1)
            bold: True
            on_press: root.send_but()
        
        Button:
            id: alpha_button
            size_hint_x:1
            pos_hint_x: 0
            pos_hint_y:0.15
            background_color: (255,255,255,1)
            markup: True
            text: "TIME EVOLUTION"
            color:(0,0.08,0.31,1)
            bold: True
            on_press: root.transition_Game()

    Button:
        id: back_YSD
        text:'Back'
        color:(0,0.08,0.31,1)
        bold: True
        on_press:root.transition_SScreen()
        pos_hint:{'x':0.0,'y':0.00}
        size_hint:0.15,0.025
        background_color:(2.44,1.75,0.27,1)


<GameScreen>
    name: 'Game'
    FloatLayout:
        Background:
            id:background
            canvas.before:
                Color:
                    rgba: 0, 0.08, 0.31, 1
                Rectangle:
                    size: self.size
                    pos:self.pos
                    #source: "sky.png"


    BoxLayout:
        orientation:'vertical'
        size_hint:0.075,0.1
        pos_hint:{'x':0.2,'y':0.025}
        Label:
            text: 'a='+str(a_slider.value)
            bold: True

        Label:
            text: 'b='+str(alpha_slider.value)
            bold: True
        
    BoxLayout:
        orientation: 'vertical'
        pos_hint:{'x':0.275,'y':0.025}
        size_hint:0.1,0.1
        Slider:
            id:a_slider
            value:0.01
            min: 0.00
            max: 0.020
            step: 0.001
            on_value: root.a=a_slider.value
        Slider:
            id:alpha_slider
            value:0.1
            min: 0.00
            max: 1
            step: 0.01
            on_value: root.alpha=alpha_slider.value
    

	BoxLayout:
	    orientation: 'vertical'
		size_hint:0.125,0.1
		pos_hint: {'x':0.375,'y':0.025}

		BoxLayout:
		    orientation: 'horizontal'
		    size_hint_y: .1

		    Button:
		        id: s1
		        size_hint_x:0.5
                pos_hint_x:0
                background_color: (2.44,1.75,0.27,1) if root.s==1 else (255,255,255,1)
                markup: True
                text: "s=1"
                color:(0,0.08,0.31,1)
                bold: True
                on_press: root.s=1

            Button:
		        id: s2
		        size_hint_x:0.5
                pos_hint_x:0
                background_color: (2.44,1.75,0.27,1) if root.s==1.5 else (255,255,255,1)
                markup: True
                text: "s=3/2"
                color:(0,0.08,0.31,1)
                bold: True
                on_press: root.s=1.5

        BoxLayout:
		    orientation: 'horizontal'
		    size_hint_y: .1

		    Button:
		        id: s3
		        size_hint_x:0.5
                pos_hint_x:0
                background_color: (2.44,1.75,0.27,1) if root.s==2 else (255,255,255,1)
                markup: True
                text: "s=2"
                color:(0,0.08,0.31,1)
                bold: True
                on_press: root.s=2

            Button:
		        id: s4
		        size_hint_x:0.5
                pos_hint_x:0
                background_color: (2.44,1.75,0.27,1) if root.s==2.5 else (255,255,255,1)
                markup: True
                text: "s=5/2"
                color:(0,0.08,0.31,1)
                bold: True
                on_press: root.s=2.5

    BoxLayout:
	    orientation: 'vertical'
        size_hint:0.1,0.1
		pos_hint: {'x':0.55,'y':0.025}

    	Button:
		    id: H1
		    size_hint_x:0.5
            pos_hint_x:0
            background_color: (2.44,1.75,0.27,1) if root.H_type==1 else (255,255,255,1)
            markup: True
            text: "H1="
            color:(0,0.08,0.31,1)
            bold: True
            on_press: root.H_type=1

        Button:
		    id: H2
		    size_hint_x:0.5
            pos_hint_y:0
            background_color: (2.44,1.75,0.27,1) if root.H_type==2 else (255,255,255,1)
            markup: True
            text: "H2="
            color:(0,0.08,0.31,1)
            bold: True
            on_press: root.H_type=2

    BoxLayout:
	    orientation: 'vertical'
        size_hint:0.2,0.1
		pos_hint: {'x':0.6,'y':0.025}

    	Image:
		    source: 'H1a.png'

        Image:
		    source:'H2a.png'


    BoxLayout:
        size_hint:0.1,0.05
		pos_hint: {'x':0.85,'y':0.05}

        Button:
            id: alpha_button
            size_hint_x:0.5
            pos_hint_x:0
            background_color: (2.44,1.75,0.27,1)
            markup: True
            text: "SEND"
            color:(0,0.08,0.31,1)
            bold: True
            on_press: root.send_but(),root.drawcall()

    Button:
        id: back_YSD
        text:'Back'
        color:(0,0.08,0.31,1)
        bold: True
        on_press:root.transition_SScreen()
        pos_hint:{'x':0.0,'y':0.00}
        size_hint:0.15,0.025
        background_color:(2.44,1.75,0.27,1)

    Button:
        id: Graph_0
        text:'Graph'
        color:(0,0.08,0.31,1)
        bold: True
        on_press:root.transition_ST()
        pos_hint:{'x':0.0,'y':0.05}
        size_hint:0.15,0.05
        background_color:(255,255,255,1)

    BoxLayout:
	    orientation: 'horizontal'
        size_hint:0.06,0.05
		pos_hint: {'x':0.47,'y':0.8}

    	Button:
		    id: Pause_button
		    size_hint_x:0.5
            pos_hint_x:0
            background_color: (255,255,255,1) if root.play==1 else (2.44,1.75,0.27,1)
            markup: True
            text: "Pause" if root.play==1 else "Play"
            color:(0,0.08,0.31,1)
            bold: True
            on_press: root.PlayButton()

    BoxLayout:
	    orientation: 'horizontal'
        size_hint:0.12,0.05
		pos_hint: {'x':0.80,'y':0.9}

    	Button:
		    id: x1
            background_color: (2.44,1.75,0.27,1) if root.vb==1 else (255,255,255,1) 
            markup: True
            text: "x1"
            color:(0,0.08,0.31,1)
            bold: True
            on_press: root.vb=1

        Button:
		    id: x2
            background_color: (2.44,1.75,0.27,1) if root.vb==2 else (255,255,255,1) 
            markup: True
            text: "x2"
            color:(0,0.08,0.31,1)
            bold: True
            on_press: root.vb=2

        Button:
		    id: x5
            background_color: (2.44,1.75,0.27,1) if root.vb==5 else (255,255,255,1) 
            markup: True
            text: "x5"
            color:(0,0.08,0.31,1)
            bold: True
            on_press: root.vb=5

        



        