<WindowManager>:
    Screen1:
    Screen2:
    

<Button>:
    size_hint: (0.8, 0.08)
    pos_hint: {"x": 0.1}
    
    
<CCell>:
    size_hint: None, None
    size: 70, 70
    pos_hint: {"y":0}
    canvas:
        Color:
            rgba: 0.3,0.3,0.7,0.5
        Rectangle:
            pos: self.pos
            size: self.size
    Button:
        text: "test"
        size_hint: None, None
        size: 70,70
        pos_hint: {"x":0, "y":0}
    
    
<CRow>:
    orientation: 'horizontal'
    pos_hint: {"x":0}
    size_hint: 0.5,None
    height: 70
    canvas:
        Color:
            rgba: 0.3,0.7,0.3,0.5
        Rectangle:
            pos: self.pos
            size: self.size
    CCell:
        id:0
        pos: self.width, 0
        
    CCell:
        id:1
        pos: self.width+70, 0
        
    
<CGrid>:
    grid: grid  
    ScrollView:           
        pos: root.pos
        size: root.size
        do_scroll_X: True
        do_scroll_y: True
        GridLayout:
            id: grid
            #pos: root.x, root.y+root.height/2.-grid.height/2.
            size_hint_y: None
            size_hint_x: None
            height: self.minimum_height
            width: self.minimum_width
            rows: 2
            spacing: 5
            row_default_height: 70
            col_default_width: 70
            col_force_default: True
            row_force_default: True
           
            
            Button:
                text: "test"
            Button:
                text: "test"
    Label:
        id:v2
        visible: False
        opacity: 1 if self.visible else 0
        disabled: not self.visible
    CRow:
        id:0
        pos: 0,root.y
        opacity: 1 if v2.visible else 0
        disabled: not v2.visible
    CRow:
        id:1
        pos: 0,root.y+75
        opacity: 1 if v2.visible else 0
        disabled: not v2.visible
    Button:
        text: "v2"
        size_hint: (0.08, 0.06)
        pos_hint: {"x":0}
        pos: 0,root.y+150
        on_release:
            if v2.visible == False: v2.visible = True
            elif v2.visible == True: v2.visible = False
        
        
                  
        


<Screen1>:
    name: "Screen1"
    btn: test_button
    cgrid: cgrid
    v2:v2
    
    FloatLayout:
        canvas:
            Color:
                rgba: 0.7,0.7,0.7,1
            Rectangle:
                pos: self.pos
                size: self.size
            Color:
                rgba: 0.3,0.3,0.3,1
            Rectangle:
                pos: (0, self.height/1.087)
                size: (self.width, self.height/12.5)
            
        
#PANEL DE PROBABILITATS         
        FloatLayout: 
            id: panel1
            visible: False
            opacity: 1 if self.visible else 0
            disabled: not self.visible
            canvas:
                Color:
                    rgba: 0.5,0.5,0.5,1
                Rectangle:
                    pos: self.pos
                    size: self.size
                    
                Color:
                    rgba: 0.3,0.3,0.3,1
                Rectangle:
                    pos: self.pos
                    size: (6, self.height)
                    
            pos_hint: {"right":1}
            size_hint: 0.3, 1
            
            
            Button:
                
                text: "Next"
                pos_hint: {"x":0.1, "y": 0.8}
                on_release: 
                    app.root.current = "Screen2"
                    
            Button:
                id: button
                visible: True
                opacity: 1 if self.visible else 0
                text: "Test"
                pos_hint: {"x":0.1, "y": 0.7}
                
            Button:
                id: button2
                visible: not button.visible
                opacity: 1 if self.visible else 0
                text: "Other"
                pos_hint: {"x":0.1, "y": 0.6}
                
            Button:
                text: "Exit"
                pos_hint: {"x":0.1, "y": 0.5}
                on_release:
                    App.get_running_app().stop()
                
            Button:
                text: "Show/Hide"
                pos_hint: {"x":0.1, "y": 0.4}
                on_release: 
                    if button.visible: button.visible = False
                    elif button2.visible: button.visible = True
                    
        #PANEL DE PORTES         
        FloatLayout: 
            id: panel2
            visible: False
            opacity: 1 if self.visible else 0
            disabled: not self.visible
            canvas:
                Color:
                    rgba: 0.5,0.5,0.5,1
                Rectangle:
                    pos: self.pos
                    size: self.size
                    
                Color:
                    rgba: 0.3,0.3,0.3,1
                Rectangle:
                    pos: (self.width, 0)
                    size: (6, self.height)
                Rectangle:
                    pos: (0, self.height-6)
                    size: (self.width, 6)
                    
            pos_hint: {"left":0, "bottom": 0}
            size_hint: 0.7, 0.3
            
        #PANEL DEL CIRCUIT         
        FloatLayout: 
            id: circuit
            canvas:
                Color:
                    rgba: 0.7,0.1,0.1,1
                Rectangle:
                    pos: (self.x,self.y)
                    size: (self.width,10)
                Rectangle:
                    pos: (self.x,self.y)
                    size: (10,self.height)
                Rectangle:
                    pos: (self.x,self.y+self.height-10)
                    size: (self.width,10)
                Rectangle:
                    pos: (self.x+self.width-10,self.y)
                    size: (10,self.height)
                
            pos_hint: {"top":0.92, "left":0}
            size_hint: 0.7 if panel1.visible else 1, 0.62 if panel2.visible else 0.92
            
            BoxLayout: 
                pos_hint: {"top":0.9,"x":0.1}
                size_hint: 0.85,0.85
                CGrid:
                    id: cgrid
                        

            
            
            
                
                
             
        Button:
            text: "Probabilities"
            size_hint: (0.15, 0.06)
            pos_hint: {"x": 0.54, "y":0.93}
            on_release:
                if panel1.visible == False: panel1.visible = True
                elif panel1.visible == True: panel1.visible = False
                
        Button:
            text: "Gates"
            size_hint: (0.1, 0.06)
            pos_hint: {"x": 0.43, "y":0.93}
            on_release:
                if panel2.visible == False: panel2.visible = True
                elif panel2.visible == True: panel2.visible = False
                
        Button:
            id:test_button
            text: "TEST"
            size_hint: (0.1, 0.06)
            pos_hint: {"x": 0.32, "y":0.93}
            on_release: root.cgrid.add_element()
            
        Button:
            id: v2
            visible: False
            opacity: 1 if self.visible else 0
            disabled: not self.visible
            text: "TEST2"
            size_hint: (0.1, 0.06)
            pos_hint: {"x": 0.21, "y":0.93}
            on_release: root.cgrid.add_element2("1","1")
        Button:
            opacity: 1 if v2.visible else 0
            disabled: not v2.visible
            text: "TEST3"
            size_hint: (0.1, 0.06)
            pos_hint: {"x": 0.1, "y":0.93}
            on_release: root.cgrid.add_element3()
        Button:
            text: "v2"
            size_hint: (0.08, 0.06)
            pos_hint: {"x": 0.01, "y":0.93}
            on_release:
                if v2.visible == False: v2.visible = True
                elif v2.visible == True: v2.visible = False
    
            
                

    
<Screen2>:
    name: "Screen2"
    
    Button:
        text: "Back"
        on_release: 
            app.root.current = "Screen1"